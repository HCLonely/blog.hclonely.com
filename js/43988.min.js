"use strict";var searchFunc=function(e,t,i){$.ajax({url:e,dataType:"xml",success:function(e){var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),s=document.getElementById(t);if(s){var a=document.getElementById(i);s.addEventListener("input",function(){$("#spin-search").removeClass("hide"),$("#icon-search").addClass("hide");var e='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);if(a.innerHTML="",this.value.trim().length<=0)return $("#spin-search").addClass("hide"),void $("#icon-search").removeClass("hide");r.forEach(function(i){var r=!0;i.title&&""!==i.title.trim()||(i.title="Untitled");var s=i.title.trim().toLowerCase(),a=i.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),n=i.url,l=-1,c=-1,h=-1;if(""!==a?t.forEach(function(e,t){l=s.indexOf(e),c=a.indexOf(e),l<0&&c<0?r=!1:(c<0&&(c=0),0==t&&(h=c))}):r=!1,r){e+="<li><a href='"+n+"' class='search-result-title'>"+s+"</a>";var o=i.content.trim().replace(/<[^>]+>/g,"");if(h>=0){var u=h-20,d=h+80;u<0&&(u=0),0==u&&(d=100),d>o.length&&(d=o.length);var f=o.substr(u,d);t.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<em class="search-keyword">'+e+"</em>")}),e+='<p class="search-result">'+f+"...</p>"}e+="</li><hr>"}}),e+="</ul>",0===$(e).find("li").length&&(e='<li><a href="#">无相关搜索结果🔍</a></li>'),a.innerHTML=e,$("#spin-search").addClass("hide"),$("#icon-search").removeClass("hide"),a.classList.remove("hide")})}}})};

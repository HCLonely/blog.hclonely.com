/*! handsome 2019-12-05 */

$.fn.extend({animateCss:function(a,b){var c=function(a){var b={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var c in b)if(void 0!==a.style[c])return b[c]}(document.createElement("div"));return this.addClass("animated "+a).one(c,function(){$(this).removeClass("animated "+a),"function"==typeof b&&b()}),this}});var parsePhotos=function(){$.each($(".album-photos figure"),function(a,b){var c=new Image;"1"===LocalConst.LAZY_LOAD?c.src=$(b).find("img").attr("data-src"):c.src=$(b).find("img").attr("src"),c.onload=function(){var a=parseFloat(c.width),d=parseFloat(c.height);$(b).css("flex-grow",50*a/d),$(b).find("a").css("padding-top",d/a*100+"%")}})},searchTips=function(){$("#search_submit button").attr("type","button");$(document).on("click",function(a){"search_input"!==a.target.getAttribute("id")&&"search_tips_drop"!==a.target.getAttribute("id")&&$("#search_tips_drop").addClass("hide")})},rightTab=function(){$(".js-tab-underline").css("width",$(".js-tab-link.active").outerWidth()),$(".js-tab-link").click(function(a){a.preventDefault(),$(".js-tab-link").removeClass("js-active-tab"),$(this).addClass("js-active-tab");var b=$(this),c=b.position();$(".js-tab-underline").css("left",c.left),$(".js-tab-underline").css("width",$(this).outerWidth())})};$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){a.target,a.relatedTarget});var initTheme=function(){searchTips();var a=navigator.userAgent;a.indexOf("Safari")>-1&&a.indexOf("Chrome")<1&&$("#left_footer").addClass("hide"),$(document).on("click","[ui-toggle-class]",function(a){a.preventDefault();var b=$(a.target);b.attr("ui-toggle-class")||(b=b.closest("[ui-toggle-class]"));var c=b.attr("ui-toggle-class").split(","),d=b.attr("target")&&b.attr("target").split(",")||Array(b),e=0;$.each(c,function(a,b){var f=d[d.length&&e];$(f).toggleClass(c[a]),e++}),b.toggleClass("active")}),$(document).on("click","[data-toggle-class]",function(a){a.preventDefault();var b=$(this),c=b.data("toggle-class"),d={};$.each(c.split(","),function(){var a=$.trim(this);if(a){var b=a.split("="),c=b[0],e=b[1];d[c]=e}}),$.each(d,function(a,b){$(a).toggleClass(b)})});var b;$(document).on("click","[ui-nav] a,[ui-nav-fold] a",function(a){b&&b.trigger("mouseleave.nav");var c=$(this);if(c.parent().siblings(".active").toggleClass("active"),c.next().is("ul")&&c.parent().toggleClass("active")&&a.preventDefault(),$(".app-aside-fix").length>0&&$(window).width()>768){var d,c=$(a.target),e=$(window).height();c.is("a")&&c.next().is(".child-nav")&&(b=c.parent().parent()),$(".app-aside-folded").length&&(d=b.position().top,d+b.height()>=e&&b.css("bottom","50px"),d+150>e&&b.css("bottom",e-d-50).css("top","auto")),$(".app-aside-dock").length&&(120+b.height()>=e?b.height(e-120):b.css("height","auto"))}c.next().is("ul")||$(window).width()<768&&$(".off-screen").removeClass("show off-screen")});var c=!0;$(document).on("mouseenter","[ui-nav] a",function(a){if($(document).on("mouseenter",".app-aside>ul.nav",function(a){c=!0}),$(document).on("mouseleave",".app-aside>ul.nav",function(a){c=!1}),b&&b.trigger("mouseleave.nav"),$("> .nav",$(".app-aside")).remove(),$(".app-aside-fix").length&&!($(window).width()<768)){var d,e=$(a.target),f=$(window).height();!e.is("a")&&(e=e.closest("a")),e.next().is("ul")&&(b=e.next(),$(".app-aside-folded").length&&(e.parent().addClass("active"),b.appendTo(".app-aside"),d=e.parent().position().top,b.css("top",d),b.attr("ui-nav-fold",""),d+b.height()>f&&b.css("bottom","50px"),d+150>f&&b.css("bottom",f-d-50).css("top","auto"),b.on("mouseleave.nav",function(a){c||(b.appendTo(e.parent()),b.off("mouseleave.nav").css("top","auto").css("bottom","auto"),e.parent().removeClass("active"),c=!1)}),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(a){a&&a.trigger("mouseleave.nav")})),$(".app-aside-dock").length&&(120+b.height()>=f?b.height(f-120):b.css("height","auto")))}}),$(document).on("mouseleave",".app-aside:not(.app-aside-dock)",function(a){c=!1,b&&b.trigger("mouseleave.nav"),$("> .nav",$(".app-aside")).remove()}),(!!navigator.userAgent.match(/MSIE/i)||!!navigator.userAgent.match(/Trident.*rv:11\./))&&$("html").addClass("ie")};$.extend({Module_Timer:function(a){function b(a){if(0===u&&(u=60),60===u)try{i--;var e=!0;0===i&&(i=59,h--,h<=0&&(h=59,g--,g<=0?(window.cancelAnimationFrame(j),e=!1):(o.text(d(g)),p.data("easyPieChart").update(c(g,24)))),e&&(q.text(d(h)),r.data("easyPieChart").update(c(h,60)))),e||(i=0),s.text(d(i)),t.data("easyPieChart").update(c(i,60)),j=window.requestAnimationFrame(b)}catch(a){window.cancelAnimationFrame(j)}else j=window.requestAnimationFrame(b);u--}function c(a,b){return parseInt(100*parseFloat(a/b))}function d(a){return a=1*parseInt(a)}var e,f,g,h,i,j,k=a.id,l=document.getElementById(k);l=$(l);var m=l.find(".span-days"),n=l.find(".pie-days"),o=l.find(".span-hours"),p=l.find(".pie-hours"),q=l.find(".span-minutes"),r=l.find(".pie-minutes"),s=l.find(".span-seconds"),t=l.find(".pie-seconds");e=a.leaveTime,f=e/86400>>0,g=(e-86400*f)/3600>>0,h=(e-3600*g-86400*f)/60>>0,i=e%60,n.easyPieChart({percent:c(f,10),lineWidth:3,trackColor:"#e8eff0",barColor:"#7266ba",scaleColor:!1,color:"#fff",size:60,lineCap:"butt",animate:1e3}),p.easyPieChart({percent:c(g,24),lineWidth:3,trackColor:"#e8eff0",barColor:"#23b7e5",scaleColor:!1,color:"#fff",size:60,lineCap:"butt",animate:1e3}),r.easyPieChart({percent:c(h,60),lineWidth:3,trackColor:"#e8eff0",barColor:"#fad733",scaleColor:!1,color:"#fff",size:60,lineCap:"butt",animate:1e3}),t.easyPieChart({percent:c(i,60),lineWidth:3,trackColor:"#e8eff0",barColor:"#23b7e5",scaleColor:!1,color:"#fff",size:60,lineCap:"butt",animate:1e3}),r.data("easyPieChart").update(c(h,60)),t.data("easyPieChart").update(c(i,60)),p.data("easyPieChart").update(c(g,24)),n.data("easyPieChart").update(c(f,10)),m.text(d(f)),o.text(d(g)),q.text(d(h)),s.text(d(i)),function(){j=window.requestAnimationFrame(b)}();var u=60}}),function(a){"use strict";a(function(){initTheme(),b(),l(),a(".skPlayer-list-switch").bind("click",function(){player.toggleList()})});var b=function(){feather.replace({width:"16px",height:"16px"}),parsePhotos(),e(),a(".off-screen-toggle").click(function(){a("#aside").toggleClass("off-screen")}),a('[data-toggle="tooltip"]').tooltip(),LocalConst.COMMENT_SYSTEM===LocalConst.COMMENT_SYSTEM_ROOT?(m(),a(function(){a("#comment").blur(function(){a(this).attr("placeholder",LocalConst.COMMENT_REJECT_PLACEHOLDER)}),a("#comment").focus(function(){a(this).attr("placeholder",LocalConst.COMMENT_PLACEHOLDER)})})):LocalConst.COMMENT_SYSTEM===LocalConst.COMMENT_SYSTEM_CHANGYAN&&n(),r(),o(),"function"==typeof registCommentEvent&&registCommentEvent(),LocalConst.THEME_HEADER_FIX&&t(),LocalConst.THEME_TOC&&j(),h(),i(),k(),f(),window.Page.seFancyBox(),a("#post-content").find("table").wrap("<div class='table-responsive box-shadow-wrap-lg'></div>"),LocalConst.THEME_HIGHLIGHT_CODE&&s(),d(),c()},c=function(){a(".plus-font-size").click(function(){var b=a("#post-content").css("font-size"),c=parseFloat(b,10);b.slice(-2);c<=14?c+=2:c-=2,a("#post-content").css("font-size",c+"px")})},d=function(){a("#generateShareImg").click(function(){a.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHOT_BEGIN,type:"info",autoClose:!1}),html2canvas(document.getElementById("mdx-share-img"),{allowTaint:!0,useCORS:!0,scale:3,onrendered:function(b){try{var c=new Image;c.setAttribute("crossOrigin","Anonymous");var d=b.toDataURL("image/png");c.src=d,a.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHORT_SUCCESS,type:"success"}),a.fancybox.open([{src:d,opts:{caption:LocalConst.SCREENSHOT_NOTICE,thumb:d}}],{loop:!1})}catch(b){a.message({title:LocalConst.OPERATION_NOTICE,message:LocalConst.SCREENSHORT_ERROR,type:"error"})}}})})},e=function(){a('input[name = "mail"]').blur(function(){var b=a(this).val();return""!=b&&a.ajax({type:"GET",data:{action:"ajax_avatar_get",form:LocalConst.BLOG_URL,email:b},success:function(b){a(".author-avatar").attr("src",b)}}),!1})},f=function(){var b=document.getElementById("comment");a("#imageInsertOk").bind("click",function(){var c=a("input[ name='imageInsertModal']").val();c='<img src="'+c+'">',g(b,c,"#imageInsertModal")}),a("#videoInsertOk").bind("click",function(){var c=a("input[ name='videoInsertModal']").val();c='<video src="'+c+'"></video>',g(b,c,"#videoInsertModal")}),a("#musicInsertOk").bind("click",function(){var c=a("input[ name='musicInsertModal']").val();a.ajax({type:"POST",url:LocalConst.BASE_SCRIPT_URL+"libs/Get.php",data:{data:c,size:"small"},async:!1,success:function(a){c=a,g(b,c,"#musicInsertModal")}})})},g=function(b,c,d){if(a(d).modal("hide"),document.selection){b.focus();document.selection.createRange().text=c,b.focus()}else if(b.selectionStart||"0"==b.selectionStart){var e=b.selectionStart,f=b.selectionEnd,g=e;b.value=b.value.substring(0,e)+c+b.value.substring(f,b.value.length),g+=c.length,b.selectionStart=g,b.selectionEnd=g,b.focus()}else b.value+=c,b.focus()},h=function(){a("#post-content video, #comments video").each(function(){a(this).hasClass("dplayer-video")||(void 0!==a(this).attr("controls")&&a(this).removeAttr("controls"),void 0===a(this).attr("preload")&&a(this).attr("preload","preload"),a(this).wrap('<div class="kyt-player"></div>'),a(this).parent().append('<div class="play-button"></div>').css("height",.6*a(this).width()),a(this).bind("click",function(){a(this).next(".play-button").is(":hidden")&&(a(this).next(".play-button").css("display","block"),a(this).removeAttr("controls"),a(this).get(0).pause())}))}),a(window).resize(function(){a(".kyt-player").each(function(){a(this).css("height",.6*a(this).width())})}),a("#post-content,#comments").delegate(".play-button","click",function(b){a(this).is(":visible")?(a(this).css("display","none"),a(this).parent().children("video").attr("controls","controls"),a(this).parent().children("video")[0].play()):(a(this).css("display","block"),a(this).parent().children("video").attr("controls","controls"),a(this).parent().children("video")[0].play())})},i=function(){a(".weixinAudio").each(function(){var b=a(this),c=b.children("audio"),d=b.find(".audio_title"),e=b.find(".audio_source"),f=b.children("input[ name='url']").attr("value");""!==f?a.ajax({type:"GET",url:f,error:function(a){},success:function(b){var f=a.parseJSON(b);c.children("source").attr("src",f.url),c.load(),d.text(f.name),e.text(f.author)}}):(c.attr("src",b.children("input[ name='mp3']").attr("value")),c.init(),d.text(b.children("input[ name='title']").attr("value")),e.text(b.children("input[ name='tips']").attr("value")))});var b=a(".weixinAudio").weixinAudio();a(".weixinAudio").on("click",function(c){var d=a(this),e=d.index(".weixinAudio");a.each(b,function(a,b){a!="weixinAudio"+e&&b.pause()})})},j=function(){var b=a(".tocTree").tocify({context:"#postpage",selectors:"h2,h3,h4",extendPage:!1,hideEffect:"slidUp",scrollTo:LocalConst.OFF_SCROLL_HEIGHT,showAndHide:!0,history:!0});b.find("li").length||a("#tag_toc_body").hide(),a("#tag_toc").hide();},k=function(){a(".show_hide_div").bind("click",function(){a("#author_info").toggleClass("hide")})},l=function(){var b=a("#goToTop");a(b).click(function(){a("body,html").animate({scrollTop:0},600)}),a(window).scroll(function(){a(window).scrollTop()>200?b.removeClass("hide"):b.addClass("hide")})},m=function(){var a=document.getElementsByClassName("OwO")[0],b=document.getElementsByClassName("OwO-textarea")[0];if(void 0!=a&&void 0!=b){new OwO({logo:LocalConst.EMOJI,container:a,target:b,api:LocalConst.BASE_SCRIPT_URL+"usr/OwO.json?v="+LocalConst.THEME_VERSION,position:"down",width:"100%",maxHeight:"220px"})}},n=function(){window.changyan=void 0,window.cyan=void 0,1==a("#SOHUCS").length&&(a("#spin_comment_changyan").addClass("show inline"),a.getScript("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:LocalConst.ChANGYAN_APP_KEY,conf:LocalConst.CHANGYAN_CONF}),a("#spin_comment_changyan").removeClass("show inline")}))},o=function(){a("#secret_comment_checkbox").change(function(){a(this).is(":checked")?(a("#comment").addClass("secret_comment_textarea"),a(this).attr("placeholder","")):a("#comment").removeClass("secret_comment_textarea")})},r=function(){a("#submit").bind("click",function(){var b=a("#author").val(),c=a("#mail").val();return""===a("#comment").val()?(a.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_CONTENT_INFO,type:"warning"}),a("#comment").focus(),!1):""===b?(a.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_NAME_INFO,type:"warning"}),a("#author").focus(),!1):""===c?(a.message({title:LocalConst.COMMENT_TITLE,message:LocalConst.COMMENT_EMAIL_INFO,type:"warning"}),a("#mail").focus(),!1):(a(this).addClass("active"),a("#spin").addClass("show inline"),void a("#comment_form").submit())})},s=function(){a("pre code").each(function(a,b){hljs.highlightBlock(b)})},t=function(){a("#comments,#small_widgets").delegate("a[href^=\\#][href!=\\#]","click",function(){var b=document.getElementById(this.hash.slice(1));if(b){var c=a(b).offset().top-LocalConst.OFF_SCROLL_HEIGHT;return a("html,body").animate({scrollTop:c},300),!1}});var b=decodeURIComponent(window.location.hash);window.location.hash.indexOf("#")>=0&&a(b).length&&setTimeout(function(){a("html,body").animate({scrollTop:a(b).offset().top-LocalConst.OFF_SCROLL_HEIGHT+"px"},400)},700)};window.Page={seFancyBox:function(){a.fancybox.defaults.buttons=["zoom","download","thumbs","close"],a("#post-content img, #comments img,.streamline img").each(function(){var b=a(this);if(void 0!==b.attr("alt"))var c=b.attr("alt");else var c="";var d=b.parent("a"),e=typeof b.attr("noGallery"),f=typeof b.attr("imgBlur");if(void 0!==b.attr("max")&&b.wrap('<div class="max-img"></div>'),"undefined"===e&&d.size()<1){var g;g=void 0===this.getAttribute("data-original")||""===this.getAttribute("data-original")||null===this.getAttribute("data-original")?this.getAttribute("src"):this.getAttribute("data-original");if(!g){return;}g=g.replace(/(.*?)[!|\?]\/.*/,"$1");var h=b.attr("class"),i="";void 0!==h&&-1!==h.indexOf("emotion")||(i='<figcaption class="post-img-figcaption">'+c+"</figcaption>",b.addClass("block"));var j=b.prop("outerHTML");j+=i,"undefined"!==f?b.prop("outerHTML",'<a class="light-link img-blur" data-fancybox="gallery" style="background-image: url('+g+')" no-pjax data-type="image" data-caption="'+c+'" href="'+g+'">'+j+"</a>"):b.prop("outerHTML",'<a class="light-link" data-fancybox="gallery" no-pjax data-type="image" data-caption="'+c+'" href="'+g+'">'+j+"</a>")}})},reInitAPlayer:function(){a(".aplayer").length<=0||loadMeting()},reInitDPlayer:function(){if(!("undefined"==typeof dPlayerOptions||"undefined"==typeof dPlayers||a(".dplayer").length<=0))for(var b=dPlayerOptions.length,c=0;c<b;c++)dPlayers[c]=new DPlayer({container:document.getElementById("player"+dPlayerOptions[c].id),element:document.getElementById("player"+dPlayerOptions[c].id),screenshot:!1,autoplay:dPlayerOptions[c].autoplay,video:dPlayerOptions[c].video,theme:dPlayerOptions[c].theme,danmaku:dPlayerOptions[c].danmaku})},doPJAXClickAction:function(){},doPJAXCompleteAction:function(){a("#Login_form").hasClass("banLogin")||(a("#Login_form").addClass("banLogin"),a("#navbar-login-user").attr("disabled","disabled"),a("#navbar-login-password").attr("disabled","disabled")),this.reInitAPlayer(),this.reInitDPlayer(),b()},doPJAXCompletePostAction:function(){}}}(jQuery),console.log("\n %c handsome v6.0 Pro %c by友人C | www.ihewro.com","color:#444;background:#eee;padding:5px 0;","color:#eee;background:#444;padding:5px 0;");
